<img src="https://capsule-render.vercel.app/api?type=waving&color=BDBDC8&height=150&section=header" width="100%" >


# Newstock
기획이 어려운 SSAFY인을 위한 [SSAFY 프로젝트 기획 보조] 서비스 “**GoodIdea**”

경제 뉴스로 투자 안목을 키우고, 모의 투자로 실전 감각까지 다지는 빅데이터 플랫폼

`SSAFY 11th 빅데이터(분산) PJT`

`개발기간: 24.10.14 ~ 24.11.19 (7주)`

![image (21).png](Picture/Logo.png)


# 목차
1. [서비스 소개](#-서비스-소개)
2. [화면 소개](#-화면-소개)
3. [기술 스택](#-기술-스택)
4. [서비스 아키텍처](#-서비스-아키텍처)
5. [프로젝트 산출물](#-프로젝트-산출물)
6. [팀원 구성](#-팀원-구성)


---

# ✨ 서비스 소개
https://github.com/user-attachments/assets/c850a5a7-e61d-4873-b734-9c216a1eff65
## 기획 배경

많은 투자자들이 주식 투자를 할 때 최신 경제 뉴스와 산업 동향을 참고하지만, 기존의 정보 제공 플랫폼은 정보가 지나치게 많고 비효율적으로 제공되는 경우가 많았습니다. 이를 해결하기 위해, 우리는 뉴스와 주식 정보를 하나의 플랫폼에서 통합하여 누구나 쉽게 이해하고 활용할 수 있도록 기획하였습니다.

**AS-IS**
- 뉴스 어쩌구저쩌구

**TO-BE**
- 투비 어쩌구 저쩌구

### 타켓
- 타겟층 적기




## 주요기능 🔍

<div align="center">

### 📌 뉴스 제공 기능

    - Newstock은 경제 뉴스를 "시황 뉴스"와 "종목 뉴스"로 구분하여 제공합니다.
      - 시황 뉴스: 경제와 금융 시장의 거시적인 흐름을 보여주는 뉴스
      - 종목 뉴스: 특정 기업이나 종목의 실적, 이슈와 관련된 뉴스
    - 감정 분석 기술을 통해 뉴스가 긍정적인지 부정적인지를 파악하여 사용자가 더 나은 투자 결정을 할 수 있도록 지원합니다.

### 📌 모의 투자 기능

    - 실제 주식 시장 데이터를 기반으로 가상 포인트를 사용해 모의 투자를 할 수 있습니다.
    - 차트 검색 기능: 사용자가 설정한 기간의 뉴스와 시황을 자동으로 분석 및 요약하여 복잡한 시장 정보를 한눈에 파악할 수 있습니다.
    - 차트 유사도 분석: 과거 주가 패턴과 유사한 차트를 찾아 제공하며, 당시의 뉴스와 시황도 요약해서 보여줍니다.

### 📌 편의 기능

    - 스크랩 기능: 원하는 뉴스를 저장할 수 있습니다.
    - AI 챗봇 기능: 검색 증강 생성을 활용해 필요한 정보를 빠르게 찾을 수 있도록 돕습니다.
    - 랭킹 시스템: 모의 투자에서 높은 수익을 기록한 사용자를 위한 게이미피케이션 요소를 추가했습니다.

</div>

# 💻 화면 소개

<details>
 <summary>📢 페이지 상세설명</summary>
 <div markdonw="1">

![슬라이드1]()
![슬라이드2]()
![슬라이드3]()
![슬라이드4]()
![슬라이드5]()
![슬라이드6]()
![슬라이드7]()
![슬라이드8]()
![슬라이드9]()
![슬라이드10]()
![슬라이드11]()
![슬라이드12]()
![슬라이드13]()
![슬라이드14]()
![슬라이드15]()
![슬라이드16]()
![슬라이드17]()
![슬라이드18]()
![슬라이드19]()
![슬라이드20]()
![슬라이드21]()

 </div>
</details>

<details>
 <summary>📢 기능 GIF</summary>
 <div markdonw="1">

### 뉴스
![뉴스 조회]()
### 3줄 요약
![뉴스 3줄 요약]()
### 실시간 주식
![실시간 주식]()
### 모의투자
![모의투자 시연]()
### 차트 분석
![차트 분석]()
### 유사도 검색
![유사도 검색]()

 </div>
</details>

<details>
 <summary>📢 화면 소개</summary>
 <div markdonw="1">

### 뉴스
https://

### 주식
https://

### 주식 기능
https://

### AI 챗봇
https://

### 온보딩
https://

### 다크모드
https://

 </div>
</details>



# 🛠 기술 스택
<div align="center">

### Frontend

![React](https://img.shields.io/badge/React-20232A?style=for-the-badge&logo=react&logoColor=61DAFB)
![JavaScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white)
![Vite](https://img.shields.io/badge/Vite-B73BFE?style=for-the-badge&logo=vite&logoColor=FFD62E)

### Infrastructure

![Jenkins](https://img.shields.io/badge/jenkins-D24939.svg?style=flat&logo=jenkins&logoColor=white)
![Nginx](https://img.shields.io/badge/nginx-%23009639.svg?style=flat&logo=nginx&logoColor=white)
<img src="https://img.shields.io/badge/Amazon S3-569A31?style=flat&logo=Amazon S3&logoColor=white">
<img src="https://img.shields.io/badge/Amazon EC2-FF9900?style=flat&logo=Amazon EC2&logoColor=white">
<img src="https://img.shields.io/badge/Amazon RDS-527FFF?style=flat&logo=Amazon RDS&logoColor=white">
<img src="https://img.shields.io/badge/Google Cloud-4285F4?style=flat&logo=Google Cloud&logoColor=white">
<img src="https://img.shields.io/badge/Docker-2496ED?style=flat&logo=Docker&logoColor=white">
<img src="https://img.shields.io/badge/Kubernetes-326CE5?style=flat&logo=kubernetes&logoColor=white">

### Backend

![Spring](https://img.shields.io/badge/spring-6DB33F.svg?style=flat&logo=spring&logoColor=white)
<img src ="https://img.shields.io/badge/Spring_Security-6DB33F?style=flat&logo=Spring-Security&logoColor=white">
<img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=flat&logo=springboot&logoColor=white">
<img src="https://img.shields.io/badge/OpenAI-412991?style=flat&logo=OpenAI&logoColor=white">
<img src="https://img.shields.io/badge/Gradle-02303A?style=flat&logo=Gradle&logoColor=white">
<img src="https://img.shields.io/badge/Apache Kafka-231F20?style=flat&logo=Apache Kafka&logoColor=white">
![JWT](https://img.shields.io/badge/JWT-black?style=flat&logo=JSON%20web%20tokens)


### DB

![Redis](https://img.shields.io/badge/Redis-FF4438.svg?style=flat&logo=redis&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-4479A1.svg?style=flat&logo=mysql&logoColor=white)
<img src="https://img.shields.io/badge/Elasticsearch-005571?style=flat&logo=elasticsearch&logoColor=white">
<img src="https://img.shields.io/badge/Apache Airflow-017CEE?style=flat&logo=Apache Airflow&logoColor=white">
<img src="https://img.shields.io/badge/Apache Hadoop-FFA500?style=flat&logo=apachehadoop&logoColor=white">
<img src="https://img.shields.io/badge/Apache HBase-BE160C?style=flat&logo=apachehbase&logoColor=white">

### TOOL
<img src="https://img.shields.io/badge/Postman-FF6C37?style=flat&logo=postman&logoColor=white">
<img src="https://img.shields.io/badge/GitLab-FC6D26?style=flat&logo=GitLab&logoColor=white">
<img src="https://img.shields.io/badge/Git-F05032?style=flat&logo=git&logoColor=white">
<img src="https://img.shields.io/badge/GitBook-BBDDE5?style=flat&logo=GitBook&logoColor=white">
<img src="https://img.shields.io/badge/Mattermost-0058CC?style=flat&logo=mattermost&logoColor=white">
<img src="https://img.shields.io/badge/Jira-0052CC?style=flat&logo=jira&logoColor=white">
<img src="https://img.shields.io/badge/GitHub-181717?style=flat&logo=github&logoColor=white">
<img src="https://img.shields.io/badge/Notion-000000?style=flat&logo=notion&logoColor=white">

### Data

![Python](https://img.shields.io/badge/python-3670A0?style=flat&logo=python&logoColor=ffdd54)

</div>

# 📌 기술 상세 설명

## 1. 전체적인 아키텍쳐
![](https)

## 2. ㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇ
![한투증 정보](https)
### WebSocket
> Websocket이란 ws 프로토콜을 기반으로 클라이언트와 서버 사이에 지속적인 양방향 연결 스트림을 만들어주는 기술입니다. 이는 stateless한 성질을 가지는 HTTP 일부 통신의 한계를 극복해 주는 것으로 서버는 클라이언트에 데이터를 실시간으로 전달할 수 있게 됩니다.

### Redis
> Redis는 주로 애플리케이션 캐시나 빠른 응답 속도를 가진 데이터베이스로 사용되는 오픈 소스 In-Memory NoSQL 저장소 입니다.

### Spring Scheduler
> Spring Scheduler는 특정 작업을 지정된 주기로 자동 실행하도록 설정할 수 있는 기능으로, 정기적인 데이터 업데이트와 관리 작업을 처리하는 데 유용합니다.

### ㅇㅇㅇㅇㅇㅇ

1. **ㅇㅇㅇㅇㅇㅇ**
  - ㅇㅇㅇㅇㅇㅇ

2. **ㅇㅇㅇㅇㅇ**
  - 사용자는 서버와 연결된 웹소켓을 통해 Redis에 저장된 최신 주식 정보를 실시간으로 조회할 수 있습니다.

3. **ㅇㅇㅇㅇㅇ**
  - 주식 시장 종료 시각(15:30)에 Spring Scheduler를 사용하여 Redis에 저장된 모든 주식 정보를 MySQL DB에 업데이트함으로써, 데이터의 영속성과 일관성을 유지합니다.

4. **ㅇㅇㅇㅇㅇ**
  - 사용자가 특정 주식 정보를 조회할 때 Redis에 해당 정보가 없을 경우, MySQL DB에서 데이터를 조회하여 Redis에 저장하고 사용자에게 제공하여 조회 성능을 향상시킵니다.

## 3. 데이터 파이프라인 설계
![데이터 파이프라인 아키텍처](https://ㅇㅇㅇㅇ)

- ㅇㅇㅇㅇㅇ
- ㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇ
### 2.1 Extract
- Daum 경제 뉴스에서 5년치의 데이터(기간 : 0000.00.00 ~ 0000.00.00) 약 ㅇㅇㅇㅇ개의 기사를 수집
- 수집 뉴스
  1. Daum 뉴스(https://news.daum.net/breakingnews/economic)
- 웹 스크레이핑을 통해 각 뉴스의 metadata와 최종 수집한 뉴스 데이터를 Data Lake로서 S3에 저장

### 2.2 Transformation
- 수집한 데이터는 별도의 전처리가 필요
- 결과 : ㅇㅇㅇㅇㅇㅇㅇㅇ

#### 1. 중복되는 데이터 삭제
- 문제

  - ㅇㅇㅇㅇㅇ
- 해결
  - ㅇㅇㅇㅇㅇ
  - ㅇㅇㅇㅇㅇ

#### 2. 필요없는 데이터 삭제
  - ㅇㅇㅇㅇㅇㅇㅇ
  - ㅇㅇㅇㅇㅇㅇㅇ
  - ㅇㅇㅇㅇㅇㅇㅇ

#### 3. 경제 뉴스 챗봇 활용하기 위한 Vectorization
- ㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇ
- ㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇ
- ㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇ
### 2.3 Load
- 수집한 데이터는 HBase 및 ElasticSearch에 저장
- **HBase** : 실시간으로 유저에게 뉴스 데이터 등을 활용하기 위해 HDFS 대신 OLTP가 유리한 HBase 활용
- **ElasticSearch** :  향후 뉴스 검색 기능 확장성을 염두해 두고 Vector Database로도 활용 가능하며 검색 기능에 특화된 ElasticSearch를 활용하였음.

## 3. ✔ MSA 아키텍쳐
### Spring 서버 및 DB를 기능별로 분리

MSA란 `MicroService Architecture`의 약자로, 기존의 Monolithic Architecture의 한계를 벗어나 애플리케이션을 느슨하게 결합된 서비스의 모임으로 구조화하는 서비스 지향 아키텍처(SOA) 스타일의 일종인 소프트웨어 개발 기법입니다.

기능을 크게 6가지로 분류하고, 서버와 데이터베이스를 각 기능에 맞게 분류하여 구현하였습니다.

| 기능     | Server           | DB             |
| ------- | ---------------- | -------------- |
| ㅇㅇ     | ㅇㅇㅇ Server    | ㅇㅇㅇㅇㅇㅇㅇㅇ |
| ㅇㅇ     | ㅇㅇㅇ Server    | ㅇㅇㅇㅇㅇㅇㅇㅇ |
| ㅇㅇ     | ㅇㅇㅇ Server    | ㅇㅇㅇㅇㅇㅇㅇㅇ |
| ㅇㅇ     | ㅇㅇㅇ Server    | ㅇㅇㅇㅇㅇㅇㅇㅇ |
| ㅇㅇ     | ㅇㅇㅇ Server    | ㅇㅇㅇㅇㅇㅇㅇㅇ |
| ㅇㅇ     | ㅇㅇㅇ Server    | ㅇㅇㅇㅇㅇㅇㅇㅇ |

### MSA 설계도

![](https://)
![](https://)

저희는 `MSA` 를 통해 다음과 같은 장점을 가질 수 있었습니다.

1. 배포
    - 서비스별 개별 배포가 가능합니다.
    - 특정 서비스의 요구사항만을 반영하여, 빠르게 배포 가능합니다.
    - 특히, 젠킨스와 쿠버네티스, Mattermost로 이어지는 배포 파이프라인을 구축하여 빠르고 간편한 배포가 수행되게 하였습니다.
2. 확장
    - 특정 서비스에 대한 확장성(scale-out)이 유리합니다.
    - 클라우드 기반 서비스 사용에 적합합니다.
    - 특히, 뉴스와 뉴스 데이터(하둡 기반) 서버를 분리하여 최신 뉴스 데이터와 관련된 기능들을 빠르게 처리할 수 있게 했습니다.
3. 장애
    - 일부 장애가 전체 서비스로 확장될 가능성이 적습니다.
    - 부분적으로 발생하는 장애에 대한 격리가 수월합니다.
    - 특히, 한국투자증권의 실시간 가격 데이터와 대용량의 뉴스 데이터를 한 서버에서 처리할 경우 장애가 발생할 확률이 높은데, 이를 분리하여 처리했습니다.
4. 그 외
    - 새로운 기술을 적용하기 유연합니다.
    - 각각의 서비스에 대한 구조 파악 및 분석이 모놀리식 구조에 비해 쉽습니다.

### Feign Client를 이용한 서버 간 통신

MSA를 적용함으로써 서버들이 기능별로 분리됨에 따라 각 서버는 자신이 관할하는 DB에만 직접 접근할 수 있게 되었습니다. 그로 인해 자신이 관할하지 않는 DB의 데이터가 필요할 경우, 해당 DB를 담당하고 있는 서버에게 데이터를 요청해야합니다.  
저희는 서버 간 통신을 하기 위해 `Feign Client`를 사용하여 기존의 RestTemplate 보다 Rest API를 사용하는데 필요한 설정을 간소화하였고, 이로 인해 비지니스 로직에 더 집중할 수 있었습니다.

- Feign - Netflix 에서 개발된 Http client binder
- 웹 서비스 클라이언트를 보다 쉽게 작성하여 사용
- interface 를 작성하고 annotation 을 선언하여 사용
- `@EnableFeignClients` 을 통해 `@FeignClient`의 구현체를 구현
### NGINX Ingrees Controller

저희는 API Gateway Server를 NGINX로 활용하였습니다.

다음과 같은 규칙으로 URL 기반 라우팅을 수행하였습니다.
- 인증이 필요한 요청 URL의 경우 Ingress.yaml 에 정의
- 인증이 필요하지 않은 요청 URL의 경우 front-inress.yaml 에 정의

![]()

추가적으로 다음과 같은 기능들도 적용하였습니다.
- nginx ingress의 auth-url 옵션을 통해 auth 처리 후 라우팅
- tls 옵션을 통해 HTTPS 적용
- API Gateway용 CORS 헤더를 추가

``` yaml
apiVersion: networking.k8s.io/v1  
kind: Ingress  
metadata:  
  name: my-app-ingress  
  namespace: default  
  annotations:  
    nginx.ingress.kubernetes.io/auth-url: "http://${인증_URL}/api/auth/verify"  
    nginx.ingress.kubernetes.io/use-regex: "true"  
    nginx.ingress.kubernetes.io/enable-cors: "true"  
    nginx.ingress.kubernetes.io/cors-allow-origin: "http://localhost:5173, https://newstock.info"  
    nginx.ingress.kubernetes.io/cors-allow-methods: "PUT, GET, POST, DELETE, OPTIONS"  
    nginx.ingress.kubernetes.io/cors-allow-headers: "Authorization, Content-Type"  
    cert-manager.io/cluster-issuer: "letsencrypt-prod"  
    nginx.ingress.kubernetes.io/ssl-redirect: "true"  
spec:  
  tls:  
    - hosts:  
        - newstock.info  
      secretName: tls-secret   # 앞서 생성한 시크릿 이름  
  ingressClassName: nginx
```

### 오토 스케일링
- Deployment에서 Pod의 CPU 초기 사용량 및 오토 스케일링 시점을 기재합니다.
  
``` yaml
spec:
  containers:
  - name: server
    image: server
    resources:
      requests:
        cpu: "200m"
      limits:
        cpu: "500m"
```

- 지정해둔 CPU 사용량을 초과하면 Pod 수를 증가시켜 부하를 분산 시킵니다.

``` yaml
spec: 
  scaleTargetRef: 
    apiVersion: apps/v1 
    kind: Deployment 
    name: nginx-deployment 
  minReplicas: 1 # 최소 Pod 수 
  maxReplicas: 10 # 최대 Pod 수 
  metrics: 
  - type: Resource 
    resource: 
      name: cpu 
      target: 
        type: Utilization 
        averageUtilization: 50 # 평균 CPU 사용률 50%를 초과하면 스케일링
```
# 📚 프로젝트 산출물

## 1. Figma(url)
![GoodIdea-프로토타입]()

## 2. ERD
![ERD]()

## 3. 요구사항 명세서
![요구사항명세서]()



# 👨‍👨‍👧‍👦 팀원 구성

<table>
  <tbody>
    <tr>
      <td align="center">
        <img src="Picture/sunhong.png" alt="FE 팀장 : 이주호" width="100px"/>
        <br />
        <sub><b>BE/DATA 팀장 : 이주호</b></sub>
      </td>
      <td align="center">
        <img src="Picture/minho.png" alt="BE 팀원 : 전지훈" width="100px"/>
        <br />
        <sub><b>BE LEADER 팀원 : 전지훈</b></sub>
      </td>
      <td align="center">
        <img src="Picture/jisuck.png" alt="FE 팀원 : 한세훈" width="100px"/>
        <br />
        <sub><b>BE/INFRA 팀원 : 한세훈</b></sub>
      </td>
      <td align="center">
        <img src="Picture/my.png" alt="BE 팀원 : 김태연" width="100px"/>
        <br />
        <sub><b>FE LEADER 팀원 : 김태연</b></sub>
      </td>
      <td align="center">
        <img src="Picture/jj.png" alt="INFRA 팀원 : 천요성" width="100px"/>
        <br />
        <sub><b>FE 팀원 : 천요성</b></sub>
      </td>
      <td align="center">
        <img src="Picture/jh.png" alt="BE/AI 팀원 : 황우성" width="100px"/>
        <br />
        <sub><b>FE 팀원 : 황우성</b></sub>
      </td>
    </tr>
  </tbody>
</table>
<hr/>

✔ 이주호
  - 
  - 
  - 
  - 
  - 
  - 
  - 

✔ 김태연
  - 
  - 
  - 
  - 
  - 
  - 


✔ 전지훈
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  
✔ 천요성
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 
  - 

✔ 한세훈
  - 
  - 
  - 
  - 
  - 

✔ 황우성
  - 
  - 
  - 
  - 
  - 
  - 


<img src="https://capsule-render.vercel.app/api?type=waving&color=BDBDC8&height=150&section=footer" width="100%" >

